### PX03xxx - Activity Management Functionality Tests

#### PX03001 - Create Activity - Unauthorized

##### Prerequisites/Inputs

###### Prerequisites:
  * Server's database is empty.

###### Inputs:
  * Server's IP address
  * Server's client port
  * Port for simulated Location Based Network server

##### Description 

The test sends *CreateActivityRequest* to the proximity server without starting the conversation first.
Then it starts the conversation and sends *CreateActivityRequest* without verifying its identity first.


###### Step 1:

The test simulates a location based network server.

The test establishes a TLS connection to the client port of the proximity server and sends *CreateActivityRequest*:

  * `Message.id := 1`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 1`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response and closes the connection.


###### Step 2:

The test establishes a TLS connection to the client port of the proximity server and sends *StartConversationRequest*:

  * `Message.id := 1`
  * `StartConversationRequest.supportedVersions := [[1,0,0]]`
  * `StartConversationRequest.publicKey` set to the test identity public key
  * `StartConversationRequest.clientChallenge` set to 32 byte random challenge; `$ClientChallenge := StartConversationRequest.clientChallenge`

and reads the response. Then it sends *CreateActivityRequest*:

  * `Message.id := 2`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 1`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response and closes the connection.


##### Acceptance Criteria

###### Step 1:

Server replies with *Response*:
  
  * `Message.id == 1`
  * `Response.status == ERROR_UNAUTHORIZED`


###### Step 2:

Server replies with *StartConversationResponse*:
  
  * `Message.id == 1`
  * `Response.status == STATUS_OK`
  * `ConversationResponse.signature` is a valid signature of $ClientChallenge
  * `StartConversationResponse.version == [1,0,0]`
  * `StartConversationResponse.publicKey.Length == 32`
  * `StartConversationResponse.challenge.Length == 32`
  * `StartConversationResponse.clientChallenge == $ClientChallenge`

Server replies with *Response*:
  
  * `Message.id == 2`
  * `Response.status == ERROR_UNAUTHORIZED`




#### PX03002 - Create Activity - Bad Role

##### Prerequisites/Inputs

###### Prerequisites:
  * Server's database is empty.

###### Inputs:
  * Server's IP address
  * Server's primary port
  * Server's neighbor port
  * Port for simulated Location Based Network server

##### Description 

The test sends *CreateActivityRequest* to the proximity server's primary and neighbor ports, but this request requires client port.


###### Step 1:

The test simulates a location based network server.

The test establishes a TLS connection to the primary port of the proximity server and sends *StartConversationRequest*:

  * `Message.id := 1`
  * `StartConversationRequest.supportedVersions := [[1,0,0]]`
  * `StartConversationRequest.publicKey` set to the test identity public key
  * `StartConversationRequest.clientChallenge` set to 32 byte random challenge; `$ClientChallenge := StartConversationRequest.clientChallenge`

Then it sends *CreateActivityRequest*:

  * `Message.id := 2`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 1`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response and closes the connection.


###### Step 2:

The test establishes a TLS connection to the neighbor port of the proximity server and sends *StartConversationRequest*:

  * `Message.id := 1`
  * `StartConversationRequest.supportedVersions := [[1,0,0]]`
  * `StartConversationRequest.publicKey` set to the test identity public key
  * `StartConversationRequest.clientChallenge` set to 32 byte random challenge; `$ClientChallenge := StartConversationRequest.clientChallenge`

and reads the response. Then it sends *VerifyIdentityRequest*:

  * `Message.id := 2`
  * `VerifyIdentityRequest.challenge := $Challenge`
  * `ConversationRequest.signature` is set to a signature of `VerifyIdentityRequest` part of the message using the test's identity private key
  
and reads the response. Then it sends *CreateActivityRequest*:

  * `Message.id := 3`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 1`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response and closes the connection.



##### Acceptance Criteria

###### Step 1:

Server replies with *StartConversationResponse*:
  
  * `Message.id == 1`
  * `Response.status == STATUS_OK`
  * `ConversationResponse.signature` is a valid signature of $ClientChallenge
  * `StartConversationResponse.version == [1,0,0]`
  * `StartConversationResponse.publicKey.Length == 32`
  * `StartConversationResponse.challenge.Length == 32`
  * `StartConversationResponse.clientChallenge == $ClientChallenge`

Then it replies with *Response*:
  
  * `Message.id == 1`
  * `Response.status == ERROR_BAD_ROLE`


###### Step 2:

Server replies with *StartConversationResponse*:
  
  * `Message.id == 1`
  * `Response.status == STATUS_OK`
  * `ConversationResponse.signature` is a valid signature of $ClientChallenge
  * `StartConversationResponse.version == [1,0,0]`
  * `StartConversationResponse.publicKey.Length == 32`
  * `StartConversationResponse.challenge.Length == 32`
  * `StartConversationResponse.clientChallenge == $ClientChallenge`

Server replies with *VerifyIdentityResponse*:

  * `Message.id == 2`
  * `Response.status == STATUS_OK`

Server replies with *Response*:
  
  * `Message.id == 3`
  * `Response.status == ERROR_BAD_ROLE`





#### PX03003 - Create Activity - Quota Exceeded

##### Prerequisites/Inputs

###### Prerequisites:
  * Server's database is empty.
  * Server is configured to host 1 activity at maximum.

###### Inputs:
  * Server's IP address
  * Server's client port
  * Port for simulated Location Based Network server

##### Description 

The test creates a new activity and then it attempts to create a second one, but the server is limited to host only 1 activity.


###### Step 1:

The test simulates a location based network server.

The test establishes a TLS connection to the client port of the proximity server and sends *StartConversationRequest*:

  * `Message.id := 1`
  * `StartConversationRequest.supportedVersions := [[1,0,0]]`
  * `StartConversationRequest.publicKey` set to the test identity public key
  * `StartConversationRequest.clientChallenge` set to 32 byte random challenge; `$ClientChallenge := StartConversationRequest.clientChallenge`

and reads the response. Then it sends *VerifyIdentityRequest*:

  * `Message.id := 2`
  * `VerifyIdentityRequest.challenge := $Challenge`
  * `ConversationRequest.signature` is set to a signature of `VerifyIdentityRequest` part of the message using the test's identity private key
  
and reads the response. Then it sends *CreateActivityRequest*:

  * `Message.id := 3`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 1`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 2:

The test sends *CreateActivityRequest*:

  * `Message.id := 4`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.



##### Acceptance Criteria

###### Step 1:

Server replies with *StartConversationResponse*:
  
  * `Message.id == 1`
  * `Response.status == STATUS_OK`
  * `ConversationResponse.signature` is a valid signature of $ClientChallenge
  * `StartConversationResponse.version == [1,0,0]`
  * `StartConversationResponse.publicKey.Length == 32`
  * `StartConversationResponse.challenge.Length == 32`
  * `StartConversationResponse.clientChallenge == $ClientChallenge`

Server replies with *VerifyIdentityResponse*:

  * `Message.id == 2`
  * `Response.status == STATUS_OK`

Server replies with *CreateActivityResponse*:
  
  * `Message.id == 3`
  * `Response.status == STATUS_OK`


###### Step 2:

Server replies with *Response*:
  
  * `Message.id == 4`
  * `Response.status == ERROR_QUOTA_EXCEEDED`








#### PX03004 - Create Activity - Invalid Requests

##### Prerequisites/Inputs

###### Prerequisites:
  * Server's database is empty.

###### Inputs:
  * Server's IP address
  * Server's client port
  * Port for simulated Location Based Network server

##### Description 

The test creates a series of invalid requests to create new activities.


###### Step 1:

The test simulates a location based network server.

The test establishes a TLS connection to the neighbor port of the proximity server and sends *StartConversationRequest*:

  * `Message.id := 1`
  * `StartConversationRequest.supportedVersions := [[1,0,0]]`
  * `StartConversationRequest.publicKey` set to the test identity public key
  * `StartConversationRequest.clientChallenge` set to 32 byte random challenge; `$ClientChallenge := StartConversationRequest.clientChallenge`

and reads the response. Then it sends *VerifyIdentityRequest*:

  * `Message.id := 2`
  * `VerifyIdentityRequest.challenge := $Challenge`
  * `ConversationRequest.signature` is set to a signature of `VerifyIdentityRequest` part of the message using the test's identity private key
  
and reads the response. Then it sends *CreateActivityRequest*:

  * `Message.id := 3`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 1`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 2:

The test sends *CreateActivityRequest*:

  * `Message.id := 4`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 1`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 3:

The test sends *CreateActivityRequest*:

  * `Message.id := 5`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key with first byte XORed by 0x12

and reads the response. 


###### Step 4:

The test sends *CreateActivityRequest*:

  * `Message.id := 6`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature := [1,2,3]`

and reads the response. 


###### Step 5:

The test sends *CreateActivityRequest*:

  * `Message.id := 7`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` set to array of 200 bytes 0x12

and reads the response.


###### Step 6:

The test sends *CreateActivityRequest*:

  * `Message.id := 8`
  * `CreateActivityRequest.activity.version := [1,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 7:

The test sends *CreateActivityRequest*:

  * `Message.id := 9`
  * `CreateActivityRequest.activity.version := [0,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 8:

 The test sends *CreateActivityRequest*:

  * `Message.id := 10`
  * `CreateActivityRequest.activity.version := [1,0,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 9:

 The test sends *CreateActivityRequest*:

  * `Message.id := 11`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 0`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 10:

 The test sends *CreateActivityRequest*:

  * `Message.id := 12`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey := [1,2,3]`
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 11:

 The test sends *CreateActivityRequest*:

  * `Message.id := 13`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key with first byte XORed by 0x12
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 12:

 The test sends *CreateActivityRequest*:

  * `Message.id := 14`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to array of 200 bytes 0x12
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 13:

 The test sends *CreateActivityRequest*:

  * `Message.id := 15`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := [1,2,3]`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 14:

 The test sends *CreateActivityRequest*:

  * `Message.id := 16`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId` is set to array of 200 bytes 0x12
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 15:

 The test sends *CreateActivityRequest*:

  * `Message.id := 17`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := [1,2,3]`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 16:

 The test sends *CreateActivityRequest*:

  * `Message.id := 18`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress` is se tto array of 200 bytes 0x12
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 17:

 The test sends *CreateActivityRequest*:

  * `Message.id := 19`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 169870`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 18:

 The test sends *CreateActivityRequest*:

  * `Message.id := 20`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 0`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 19:

 The test sends *CreateActivityRequest*:

  * `Message.id := 21`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := ""`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 20:

 The test sends *CreateActivityRequest*:

  * `Message.id := 22`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type` is set to string containing 100x 'a'
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 21:

 The test sends *CreateActivityRequest*:

  * `Message.id := 23`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type` is set to string containing 50x 'ɐ' (UTF8 code 0xc990), which consumes 2 bytes per character
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 22:

 The test sends *CreateActivityRequest*:

  * `Message.id := 24`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 987654321`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 23:

 The test sends *CreateActivityRequest*:

  * `Message.id := 25`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 987654321`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 24:

 The test sends *CreateActivityRequest*:

  * `Message.id := 26`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 987654321`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 25:

 The test sends *CreateActivityRequest*:

  * `Message.id := 27`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime := 987654321987654321`
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 26:

 The test sends *CreateActivityRequest*:

  * `Message.id := 28`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime := 987654321987654321`
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 27:

 The test sends *CreateActivityRequest*:

  * `Message.id := 29`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp - 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 28:

 The test sends *CreateActivityRequest*:

  * `Message.id := 30`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData` is set to string containing 2050x 'a'
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 29:

 The test sends *CreateActivityRequest*:

  * `Message.id := 31`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData` is set to string containing 1050x 'ɐ' (UTF8 code 0xc990), which consumes 2 bytes per character
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 30:

 The test sends *CreateActivityRequest*:

  * `Message.id := 32`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := [[SHA256("test1"),SHA256("test2"),[1,2,3],SHA256("test3")]]`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.





##### Acceptance Criteria

###### Step 1:

Server replies with *StartConversationResponse*:
  
  * `Message.id == 1`
  * `Response.status == STATUS_OK`
  * `ConversationResponse.signature` is a valid signature of $ClientChallenge
  * `StartConversationResponse.version == [1,0,0]`
  * `StartConversationResponse.publicKey.Length == 32`
  * `StartConversationResponse.challenge.Length == 32`
  * `StartConversationResponse.clientChallenge == $ClientChallenge`

Server replies with *VerifyIdentityResponse*:

  * `Message.id == 2`
  * `Response.status == STATUS_OK`

Server replies with *CreateActivityResponse*:
  
  * `Message.id == 3`
  * `Response.status == STATUS_OK`


###### Step 2:

Server replies with *Response*:
  
  * `Message.id == 4`
  * `Response.status == ERROR_ALREADY_EXISTS`


###### Step 3:

Server replies with *Response*:
  
  * `Message.id == 5`
  * `Response.status == ERROR_INVALID_SIGNATURE`


###### Step 4:

Server replies with *Response*:
  
  * `Message.id == 6`
  * `Response.status == ERROR_INVALID_SIGNATURE`


###### Step 5:

Server replies with *Response*:
  
  * `Message.id == 7`
  * `Response.status == ERROR_INVALID_SIGNATURE`


###### Step 6:

Server replies with *Response*:
  
  * `Message.id == 8`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.version"`


###### Step 7:

Server replies with *Response*:
  
  * `Message.id == 9`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.version"`


###### Step 8:

Server replies with *Response*:
  
  * `Message.id == 10`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.version"`


###### Step 9:

Server replies with *Response*:
  
  * `Message.id == 11`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.id"`


###### Step 10:

Server replies with *Response*:
  
  * `Message.id == 12`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.ownerPublicKey"`


###### Step 11:

Server replies with *Response*:
  
  * `Message.id == 13`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.ownerPublicKey"`


###### Step 12:

Server replies with *Response*:
  
  * `Message.id == 14`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.ownerPublicKey"`


###### Step 13:

Server replies with *Response*:
  
  * `Message.id == 15`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.profileServerContact.networkId"`


###### Step 14:

Server replies with *Response*:
  
  * `Message.id == 16`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.profileServerContact.networkId"`


###### Step 15:

Server replies with *Response*:
  
  * `Message.id == 17`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.profileServerContact.ipAddress"`


###### Step 16:

Server replies with *Response*:
  
  * `Message.id == 18`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.profileServerContact.ipAddress"`


###### Step 17:

Server replies with *Response*:
  
  * `Message.id == 19`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.profileServerContact.primaryPort"`


###### Step 18:

Server replies with *Response*:
  
  * `Message.id == 20`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.profileServerContact.primaryPort"`


###### Step 19:

Server replies with *Response*:
  
  * `Message.id == 21`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.type"`


###### Step 20:

Server replies with *Response*:
  
  * `Message.id == 22`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.type"`


###### Step 21:

Server replies with *Response*:
  
  * `Message.id == 23`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.type"`


###### Step 22:

Server replies with *Response*:
  
  * `Message.id == 24`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.latitude"`


###### Step 23:

Server replies with *Response*:
  
  * `Message.id == 25`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.longitude"`


###### Step 24:

Server replies with *Response*:
  
  * `Message.id == 26`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.precision"`


###### Step 25:

Server replies with *Response*:
  
  * `Message.id == 27`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.startTime" || Response.details == "activity.expirationTime"`


###### Step 26:

Server replies with *Response*:
  
  * `Message.id == 28`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.expirationTime"`


###### Step 27:

Server replies with *Response*:
  
  * `Message.id == 29`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.expirationTime"`


###### Step 28:

Server replies with *Response*:
  
  * `Message.id == 30`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.extraData"`


###### Step 29:

Server replies with *Response*:
  
  * `Message.id == 31`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.extraData"`


###### Step 30:

Server replies with *Response*:
  
  * `Message.id == 32`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "ignoreServerIds"`







#### PX03005 - Create Activity - Rejected

##### Prerequisites/Inputs

###### Prerequisites:
  * Server's database is empty.

###### Inputs:
  * Server's IP address
  * Server's primary port
  * Port for simulated Location Based Network server
  * Base port for simulated proximity server 2 ($BasePort2)
  * Base port for simulated proximity server 3 ($BasePort3)

##### Description 

The test attempts to create a new activities located closer to another proximity servers.


###### Step 1:

The test obtains a list of service ports from the profile server's primary port.

The test simulates two additional proximity servers - one with location at [10, 20] and network ID `$Server2Id`, 
running its primary port service on $BasePort2 and neighor port on $BasePort2+1; and one with location at [-10, 5] and network ID `$Server3Id`, running its primary port on $BasePort3
and its neighbor port on $BasePort3+1.

The test simulates a location based network server with location at [0, 0] let's the target proximity server to perform the LOC initialization 
with the simulated location server. 

Then test's location server sends a notification message to the proximity server with the information that the simulated proximity servers
are in its neighborhood.

The simulated proximity servers then wait for *StartNeighborhoodInitializationRequest* messages, to which they reply
with corresponding *StartNeighborhoodInitializationResponse*.

The both proximity servers send *FinishNeighborhoodInitializationRequest* to the target proximity server and wait for *FinishNeighborhoodInitializationResponse* messages.


###### Step 2:

The test establishes a TLS connection to the client port of the proximity server and sends *StartConversationRequest*:

  * `Message.id := 1`
  * `StartConversationRequest.supportedVersions := [[1,0,0]]`
  * `StartConversationRequest.publicKey` set to the test identity public key
  * `StartConversationRequest.clientChallenge` set to 32 byte random challenge; `$ClientChallenge := StartConversationRequest.clientChallenge`

and reads the response. Then it sends *VerifyIdentityRequest*:

  * `Message.id := 2`
  * `VerifyIdentityRequest.challenge := $Challenge`
  * `ConversationRequest.signature` is set to a signature of `VerifyIdentityRequest` part of the message using the test's identity private key
  
and reads the response. 


###### Step 3:

The test sends *CreateActivityRequest* to create activity with location at [18, 20]:

  * `Message.id := 3`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 1`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 18000000`
  * `CreateActivityRequest.activity.longitude := 20000000`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 4:

The test sends *CreateActivityRequest* to create activity with location at [-18, 5]:

  * `Message.id := 4`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 1`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := -18000000`
  * `CreateActivityRequest.activity.longitude := 5000000`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 5:

The test sends *CreateActivityRequest* to create activity with location at [0, 20]:

  * `Message.id := 5`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 1`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 0`
  * `CreateActivityRequest.activity.longitude := 20000000`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := [$ServerId2]`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 6:

The test sends *CreateActivityRequest* to create activity with location at [0, 20]:

  * `Message.id := 6`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 1`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 0`
  * `CreateActivityRequest.activity.longitude := 20000000`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := [$ServerId3]`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.



##### Acceptance Criteria

###### Step 1:

The test successfully obtains list of ports on which the proximity server provides its services. 
The test successfully starts simulated proximity servers and simulated LOC server. 
The target proximity server successfully connects to the simulated LOC server and initializes the LOC session.

Simulated LOC server successfully sends notification message to the profile server.

The target proximity server sends *StartNeighborhoodInitializationRequest*.

The target proximity server sends the corresponding *FinishNeighborhoodInitializationResponse*.


###### Step 2:

Server replies with *StartConversationResponse*:
  
  * `Message.id == 1`
  * `Response.status == STATUS_OK`
  * `ConversationResponse.signature` is a valid signature of $ClientChallenge
  * `StartConversationResponse.version == [1,0,0]`
  * `StartConversationResponse.publicKey.Length == 32`
  * `StartConversationResponse.challenge.Length == 32`
  * `StartConversationResponse.clientChallenge == $ClientChallenge`

Server replies with *VerifyIdentityResponse*:

  * `Message.id == 2`
  * `Response.status == STATUS_OK`


###### Step 3:

Server replies with *Response*:
  
  * `Message.id == 3`
  * `Response.status == ERROR_REJECTED`
  * `Response.details == $Server2Id.ToHex()`


###### Step 4:

Server replies with *Response*:
  
  * `Message.id == 4`
  * `Response.status == ERROR_REJECTED`
  * `Response.details == $Server3Id.ToHex()`


###### Step 5:

Server replies with *Response*:
  
  * `Message.id == 5`
  * `Response.status == ERROR_REJECTED`
  * `Response.details == $Server3Id.ToHex()`


###### Step 6:

Server replies with *Response*:
  
  * `Message.id == 6`
  * `Response.status == ERROR_REJECTED`
  * `Response.details == $Server2Id.ToHex()`






#### PX03006 - Create Activity

##### Prerequisites/Inputs

###### Prerequisites:
  * Server's database is empty.

###### Inputs:
  * Server's IP address
  * Server's primary port
  * Port for simulated Location Based Network server
  * Base port for simulated proximity server 2 ($BasePort2)
  * Base port for simulated proximity server 3 ($BasePort3)

##### Description 

The test creates several activities on the proximity server.


###### Step 1:

The test obtains a list of service ports from the profile server's primary port.

The test simulates two additional proximity servers - one with location at [10, 20] and network ID `$Server2Id`, 
running its primary port service on $BasePort2 and neighor port on $BasePort2+1; and one with location at [-10, 5] and network ID `$Server3Id`, running its primary port on $BasePort3
and its neighbor port on $BasePort3+1.

The test simulates a location based network server with location at [0, 0] let's the target proximity server to perform the LOC initialization 
with the simulated location server. 

Then test's location server sends a notification message to the proximity server with the information that the simulated proximity servers
are in its neighborhood.

The simulated proximity servers then wait for *StartNeighborhoodInitializationRequest* messages, to which they reply
with corresponding *StartNeighborhoodInitializationResponse*.

The both proximity servers send *FinishNeighborhoodInitializationRequest* to the target proximity server and wait for *FinishNeighborhoodInitializationResponse* messages.


###### Step 2:

The test establishes a TLS connection to the client port of the proximity server and sends *StartConversationRequest*:

  * `Message.id := 1`
  * `StartConversationRequest.supportedVersions := [[1,0,0]]`
  * `StartConversationRequest.publicKey` set to the test identity public key
  * `StartConversationRequest.clientChallenge` set to 32 byte random challenge; `$ClientChallenge := StartConversationRequest.clientChallenge`

and reads the response. Then it sends *VerifyIdentityRequest*:

  * `Message.id := 2`
  * `VerifyIdentityRequest.challenge := $Challenge`
  * `ConversationRequest.signature` is set to a signature of `VerifyIdentityRequest` part of the message using the test's identity private key
  
and reads the response. 


###### Step 3:

The test sends *CreateActivityRequest* to create activity with location at [18, 20]:

  * `Message.id := 3`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 1`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 18000000`
  * `CreateActivityRequest.activity.longitude := 20000000`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := [$ServerId2]`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 4:

The test sends *CreateActivityRequest* to create activity with location at [-18, 5]:

  * `Message.id := 4`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 2`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := -18000000`
  * `CreateActivityRequest.activity.longitude := 5000000`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := [$ServerId3]`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 5:

The test sends *CreateActivityRequest* to create activity with location at [0, 20]:

  * `Message.id := 5`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 3`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 0`
  * `CreateActivityRequest.activity.longitude := 20000000`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := [$ServerId2, $ServerId3]`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 6:

The test sends *CreateActivityRequest* to create activity with location at [0, 1]:

  * `Message.id := 6`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 4`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 2001:0db8:0000:0042:0000:8a2e:0370:7334`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 0`
  * `CreateActivityRequest.activity.longitude := 1000000`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := [$ServerId3]`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.



##### Acceptance Criteria

###### Step 1:

The test successfully obtains list of ports on which the proximity server provides its services. 
The test successfully starts simulated proximity servers and simulated LOC server. 
The target proximity server successfully connects to the simulated LOC server and initializes the LOC session.

Simulated LOC server successfully sends notification message to the profile server.

The target proximity server sends *StartNeighborhoodInitializationRequest*.

The target proximity server sends the corresponding *FinishNeighborhoodInitializationResponse*.


###### Step 2:

Server replies with *StartConversationResponse*:
  
  * `Message.id == 1`
  * `Response.status == STATUS_OK`
  * `ConversationResponse.signature` is a valid signature of $ClientChallenge
  * `StartConversationResponse.version == [1,0,0]`
  * `StartConversationResponse.publicKey.Length == 32`
  * `StartConversationResponse.challenge.Length == 32`
  * `StartConversationResponse.clientChallenge == $ClientChallenge`

Server replies with *VerifyIdentityResponse*:

  * `Message.id == 2`
  * `Response.status == STATUS_OK`


###### Step 3:

Server replies with *CreateActivityResponse*:
  
  * `Message.id == 3`
  * `Response.status == STATUS_OK`


###### Step 4:

Server replies with *CreateActivityResponse*:
  
  * `Message.id == 4`
  * `Response.status == STATUS_OK`


###### Step 5:

Server replies with *CreateActivityResponse*:
  
  * `Message.id == 5`
  * `Response.status == STATUS_OK`


###### Step 6:

Server replies with *CreateActivityResponse*:
  
  * `Message.id == 6`
  * `Response.status == STATUS_OK`






#### PX03007 - Update Activity - Unauthorized

##### Prerequisites/Inputs

###### Prerequisites:
  * Server's database is empty.

###### Inputs:
  * Server's IP address
  * Server's client port
  * Port for simulated Location Based Network server

##### Description 

The test sends *UpdateActivityRequest* to the proximity server without starting the conversation first.
Then it starts the conversation and sends *UpdateActivityRequest* without verifying its identity first.


###### Step 1:

The test simulates a location based network server.

The test establishes a TLS connection to the client port of the proximity server and sends *UpdateActivityRequest*:

  * `Message.id := 1`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response and closes the connection.


###### Step 2:

The test establishes a TLS connection to the client port of the proximity server and sends *StartConversationRequest*:

  * `Message.id := 1`
  * `StartConversationRequest.supportedVersions := [[1,0,0]]`
  * `StartConversationRequest.publicKey` set to the test identity public key
  * `StartConversationRequest.clientChallenge` set to 32 byte random challenge; `$ClientChallenge := StartConversationRequest.clientChallenge`

and reads the response. Then it sends *UpdateActivityRequest*:

  * `Message.id := 2`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response and closes the connection.


##### Acceptance Criteria

###### Step 1:

Server replies with *Response*:
  
  * `Message.id == 1`
  * `Response.status == ERROR_UNAUTHORIZED`


###### Step 2:

Server replies with *StartConversationResponse*:
  
  * `Message.id == 1`
  * `Response.status == STATUS_OK`
  * `ConversationResponse.signature` is a valid signature of $ClientChallenge
  * `StartConversationResponse.version == [1,0,0]`
  * `StartConversationResponse.publicKey.Length == 32`
  * `StartConversationResponse.challenge.Length == 32`
  * `StartConversationResponse.clientChallenge == $ClientChallenge`

Server replies with *Response*:
  
  * `Message.id == 2`
  * `Response.status == ERROR_UNAUTHORIZED`







#### PX03008 - Update Activity - Bad Role

##### Prerequisites/Inputs

###### Prerequisites:
  * Server's database is empty.

###### Inputs:
  * Server's IP address
  * Server's primary port
  * Server's neighbor port
  * Port for simulated Location Based Network server

##### Description 

The test sends *UpdateActivityRequest* to the proximity server's primary and neighbor ports, but this request requires client port.


###### Step 1:

The test simulates a location based network server.

The test establishes a TLS connection to the primary port of the proximity server and sends *StartConversationRequest*:

  * `Message.id := 1`
  * `StartConversationRequest.supportedVersions := [[1,0,0]]`
  * `StartConversationRequest.publicKey` set to the test identity public key
  * `StartConversationRequest.clientChallenge` set to 32 byte random challenge; `$ClientChallenge := StartConversationRequest.clientChallenge`

Then it sends *UpdateActivityRequest*:

  * `Message.id := 2`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response and closes the connection.


###### Step 2:

The test establishes a TLS connection to the neighbor port of the proximity server and sends *StartConversationRequest*:

  * `Message.id := 1`
  * `StartConversationRequest.supportedVersions := [[1,0,0]]`
  * `StartConversationRequest.publicKey` set to the test identity public key
  * `StartConversationRequest.clientChallenge` set to 32 byte random challenge; `$ClientChallenge := StartConversationRequest.clientChallenge`

and reads the response. Then it sends *VerifyIdentityRequest*:

  * `Message.id := 2`
  * `VerifyIdentityRequest.challenge := $Challenge`
  * `ConversationRequest.signature` is set to a signature of `VerifyIdentityRequest` part of the message using the test's identity private key
  
and reads the response. Then it sends *UpdateActivityRequest*:

  * `Message.id := 3`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response and closes the connection.



##### Acceptance Criteria

###### Step 1:

Server replies with *StartConversationResponse*:
  
  * `Message.id == 1`
  * `Response.status == STATUS_OK`
  * `ConversationResponse.signature` is a valid signature of $ClientChallenge
  * `StartConversationResponse.version == [1,0,0]`
  * `StartConversationResponse.publicKey.Length == 32`
  * `StartConversationResponse.challenge.Length == 32`
  * `StartConversationResponse.clientChallenge == $ClientChallenge`

Then it replies with *Response*:
  
  * `Message.id == 1`
  * `Response.status == ERROR_BAD_ROLE`


###### Step 2:

Server replies with *StartConversationResponse*:
  
  * `Message.id == 1`
  * `Response.status == STATUS_OK`
  * `ConversationResponse.signature` is a valid signature of $ClientChallenge
  * `StartConversationResponse.version == [1,0,0]`
  * `StartConversationResponse.publicKey.Length == 32`
  * `StartConversationResponse.challenge.Length == 32`
  * `StartConversationResponse.clientChallenge == $ClientChallenge`

Server replies with *VerifyIdentityResponse*:

  * `Message.id == 2`
  * `Response.status == STATUS_OK`

Server replies with *Response*:
  
  * `Message.id == 3`
  * `Response.status == ERROR_BAD_ROLE`







#### PX03009 - Update Activity - Invalid Requests

##### Prerequisites/Inputs

###### Prerequisites:
  * Server's database is empty.

###### Inputs:
  * Server's IP address
  * Server's client port
  * Port for simulated Location Based Network server

##### Description 

The test creates a series of invalid requests to create new activities.


###### Step 1:

The test simulates a location based network server.

The test establishes a TLS connection to the neighbor port of the proximity server and sends *StartConversationRequest*:

  * `Message.id := 1`
  * `StartConversationRequest.supportedVersions := [[1,0,0]]`
  * `StartConversationRequest.publicKey` set to the test identity public key
  * `StartConversationRequest.clientChallenge` set to 32 byte random challenge; `$ClientChallenge := StartConversationRequest.clientChallenge`

and reads the response. Then it sends *VerifyIdentityRequest*:

  * `Message.id := 2`
  * `VerifyIdentityRequest.challenge := $Challenge`
  * `ConversationRequest.signature` is set to a signature of `VerifyIdentityRequest` part of the message using the test's identity private key
  
and reads the response. Then it sends *CreateActivityRequest*:

  * `Message.id := 3`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 1`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1`
  * `CreateActivityRequest.activity.longitude := 2`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 2:

The test sends *UpdateActivityRequest*:

  * `Message.id := 4`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 10`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 3:

The test sends *UpdateActivityRequest*:

  * `Message.id := 5`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key with first byte XORed by 0x12

and reads the response. 


###### Step 4:

The test sends *UpdateActivityRequest*:

  * `Message.id := 6`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature := [1,2,3]`

and reads the response. 


###### Step 5:

The test sends *UpdateActivityRequest*:

  * `Message.id := 7`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` set to array of 200 bytes 0x12

and reads the response.


###### Step 6:

The test sends *UpdateActivityRequest*:

  * `Message.id := 8`
  * `UpdateActivityRequest.activity.version := [1,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 7:

The test sends *UpdateActivityRequest*:

  * `Message.id := 9`
  * `UpdateActivityRequest.activity.version := [0,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 8:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 10`
  * `UpdateActivityRequest.activity.version := [1,0,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 9:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 11`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 0`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 10:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 12`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey := [1,2,3]`
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 11:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 13`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key with first byte XORed by 0x12
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 12:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 14`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to array of 200 bytes 0x12
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 13:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 15`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := [1,2,3]`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 14:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 16`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId` is set to array of 200 bytes 0x12
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 15:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 17`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := [1,2,3]`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 16:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 18`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress` is se tto array of 200 bytes 0x12
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 17:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 19`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 169870`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 18:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 20`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 0`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 19:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 21`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := ""`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 20:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 22`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type` is set to string containing 100x 'a'
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 21:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 23`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type` is set to string containing 50x 'ɐ' (UTF8 code 0xc990), which consumes 2 bytes per character
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 22:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 24`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 987654321`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 23:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 25`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 987654321`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 24:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 26`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 987654321`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 25:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 27`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime := 987654321987654321`
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 26:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 28`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime := 987654321987654321`
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 27:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 29`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp - 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 28:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 30`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData` is set to string containing 2050x 'a'
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 29:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 31`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData` is set to string containing 1050x 'ɐ' (UTF8 code 0xc990), which consumes 2 bytes per character
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 30:

 The test sends *UpdateActivityRequest*:

  * `Message.id := 32`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 1`
  * `UpdateActivityRequest.activity.longitude := 2`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := [[SHA256("test1"),SHA256("test2"),[1,2,3],SHA256("test3")]]`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.





##### Acceptance Criteria

###### Step 1:

Server replies with *StartConversationResponse*:
  
  * `Message.id == 1`
  * `Response.status == STATUS_OK`
  * `ConversationResponse.signature` is a valid signature of $ClientChallenge
  * `StartConversationResponse.version == [1,0,0]`
  * `StartConversationResponse.publicKey.Length == 32`
  * `StartConversationResponse.challenge.Length == 32`
  * `StartConversationResponse.clientChallenge == $ClientChallenge`

Server replies with *VerifyIdentityResponse*:

  * `Message.id == 2`
  * `Response.status == STATUS_OK`

Server replies with *CreateActivityResponse*:
  
  * `Message.id == 3`
  * `Response.status == STATUS_OK`


###### Step 2:

Server replies with *Response*:
  
  * `Message.id == 4`
  * `Response.status == ERROR_NOT_FOUND`


###### Step 3:

Server replies with *Response*:
  
  * `Message.id == 5`
  * `Response.status == ERROR_INVALID_SIGNATURE`


###### Step 4:

Server replies with *Response*:
  
  * `Message.id == 6`
  * `Response.status == ERROR_INVALID_SIGNATURE`


###### Step 5:

Server replies with *Response*:
  
  * `Message.id == 7`
  * `Response.status == ERROR_INVALID_SIGNATURE`


###### Step 6:

Server replies with *Response*:
  
  * `Message.id == 8`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.version"`


###### Step 7:

Server replies with *Response*:
  
  * `Message.id == 9`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.version"`


###### Step 8:

Server replies with *Response*:
  
  * `Message.id == 10`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.version"`


###### Step 9:

Server replies with *Response*:
  
  * `Message.id == 11`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.id"`


###### Step 10:

Server replies with *Response*:
  
  * `Message.id == 12`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.ownerPublicKey"`


###### Step 11:

Server replies with *Response*:
  
  * `Message.id == 13`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.ownerPublicKey"`


###### Step 12:

Server replies with *Response*:
  
  * `Message.id == 14`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.ownerPublicKey"`


###### Step 13:

Server replies with *Response*:
  
  * `Message.id == 15`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.profileServerContact.networkId"`


###### Step 14:

Server replies with *Response*:
  
  * `Message.id == 16`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.profileServerContact.networkId"`


###### Step 15:

Server replies with *Response*:
  
  * `Message.id == 17`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.profileServerContact.ipAddress"`


###### Step 16:

Server replies with *Response*:
  
  * `Message.id == 18`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.profileServerContact.ipAddress"`


###### Step 17:

Server replies with *Response*:
  
  * `Message.id == 19`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.profileServerContact.primaryPort"`


###### Step 18:

Server replies with *Response*:
  
  * `Message.id == 20`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.profileServerContact.primaryPort"`


###### Step 19:

Server replies with *Response*:
  
  * `Message.id == 21`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.type"`


###### Step 20:

Server replies with *Response*:
  
  * `Message.id == 22`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.type"`


###### Step 21:

Server replies with *Response*:
  
  * `Message.id == 23`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.type"`


###### Step 22:

Server replies with *Response*:
  
  * `Message.id == 24`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.latitude"`


###### Step 23:

Server replies with *Response*:
  
  * `Message.id == 25`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.longitude"`


###### Step 24:

Server replies with *Response*:
  
  * `Message.id == 26`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.precision"`


###### Step 25:

Server replies with *Response*:
  
  * `Message.id == 27`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.startTime" || Response.details == "activity.expirationTime"`


###### Step 26:

Server replies with *Response*:
  
  * `Message.id == 28`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.expirationTime"`


###### Step 27:

Server replies with *Response*:
  
  * `Message.id == 29`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.expirationTime"`


###### Step 28:

Server replies with *Response*:
  
  * `Message.id == 30`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.extraData"`


###### Step 29:

Server replies with *Response*:
  
  * `Message.id == 31`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "activity.extraData"`


###### Step 30:

Server replies with *Response*:
  
  * `Message.id == 32`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "ignoreServerIds"`










#### PX03010 - Update Activity - Rejected

##### Prerequisites/Inputs

###### Prerequisites:
  * Server's database is empty.

###### Inputs:
  * Server's IP address
  * Server's primary port
  * Port for simulated Location Based Network server
  * Base port for simulated proximity server 2 ($BasePort2)
  * Base port for simulated proximity server 3 ($BasePort3)

##### Description 

The test attempts to create a new activities located closer to another proximity servers.


###### Step 1:

The test obtains a list of service ports from the profile server's primary port.

The test simulates two additional proximity servers - one with location at [10, 20] and network ID `$Server2Id`, 
running its primary port service on $BasePort2 and neighor port on $BasePort2+1; and one with location at [-10, 5] and network ID `$Server3Id`, running its primary port on $BasePort3
and its neighbor port on $BasePort3+1.

The test simulates a location based network server with location at [0, 0] let's the target proximity server to perform the LOC initialization 
with the simulated location server. 

Then test's location server sends a notification message to the proximity server with the information that the simulated proximity servers
are in its neighborhood.

The simulated proximity servers then wait for *StartNeighborhoodInitializationRequest* messages, to which they reply
with corresponding *StartNeighborhoodInitializationResponse*.

The both proximity servers send *FinishNeighborhoodInitializationRequest* to the target proximity server and wait for *FinishNeighborhoodInitializationResponse* messages.


###### Step 2:

The test establishes a TLS connection to the client port of the proximity server and sends *StartConversationRequest*:

  * `Message.id := 1`
  * `StartConversationRequest.supportedVersions := [[1,0,0]]`
  * `StartConversationRequest.publicKey` set to the test identity public key
  * `StartConversationRequest.clientChallenge` set to 32 byte random challenge; `$ClientChallenge := StartConversationRequest.clientChallenge`

and reads the response. Then it sends *VerifyIdentityRequest*:

  * `Message.id := 2`
  * `VerifyIdentityRequest.challenge := $Challenge`
  * `ConversationRequest.signature` is set to a signature of `VerifyIdentityRequest` part of the message using the test's identity private key
  
and reads the response. 


###### Step 3:

The test sends *CreateActivityRequest* to create activity with location at [1, 2]:

  * `Message.id := 3`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 1`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1000000`
  * `CreateActivityRequest.activity.longitude := 2000000`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response. Then it sends *UpdateActivityRequest* to move the activity to [18, 20]:

  * `Message.id := 4`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 18000000`
  * `UpdateActivityRequest.activity.longitude := 20000000`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 4:

The test sends *CreateActivityRequest* to create activity with location at [1, 2]:

  * `Message.id := 5`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 1`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1000000`
  * `CreateActivityRequest.activity.longitude := 2000000`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response. Then it sends *UpdateActivityRequest* to move the activity to [-18, 5]:

  * `Message.id := 6`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := -18000000`
  * `UpdateActivityRequest.activity.longitude := 5000000`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 5:

The test sends *CreateActivityRequest* to create activity with location at [1, 2]:

  * `Message.id := 7`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 1`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1000000`
  * `CreateActivityRequest.activity.longitude := 2000000`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response. Then it sends *UpdateActivityRequest* to create activity with location at [0, 20]:

  * `Message.id := 8`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 0`
  * `UpdateActivityRequest.activity.longitude := 20000000`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := [$ServerId2]`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.


###### Step 6:

The test sends *CreateActivityRequest* to create activity with location at [1, 2]:

  * `Message.id := 9`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 1`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1000000`
  * `CreateActivityRequest.activity.longitude := 2000000`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := ""`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response. Then it sends *UpdateActivityRequest* to create activity with location at [0, 20]:

  * `Message.id := 10`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `UpdateActivityRequest.activity.type := "Test Type"`
  * `UpdateActivityRequest.activity.latitude := 0`
  * `UpdateActivityRequest.activity.longitude := 20000000`
  * `UpdateActivityRequest.activity.precision := 0`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.extraData := ""`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := [$ServerId3]`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.



##### Acceptance Criteria

###### Step 1:

The test successfully obtains list of ports on which the proximity server provides its services. 
The test successfully starts simulated proximity servers and simulated LOC server. 
The target proximity server successfully connects to the simulated LOC server and initializes the LOC session.

Simulated LOC server successfully sends notification message to the profile server.

The target proximity server sends *StartNeighborhoodInitializationRequest*.

The target proximity server sends the corresponding *FinishNeighborhoodInitializationResponse*.


###### Step 2:

Server replies with *StartConversationResponse*:
  
  * `Message.id == 1`
  * `Response.status == STATUS_OK`
  * `ConversationResponse.signature` is a valid signature of $ClientChallenge
  * `StartConversationResponse.version == [1,0,0]`
  * `StartConversationResponse.publicKey.Length == 32`
  * `StartConversationResponse.challenge.Length == 32`
  * `StartConversationResponse.clientChallenge == $ClientChallenge`

Server replies with *VerifyIdentityResponse*:

  * `Message.id == 2`
  * `Response.status == STATUS_OK`


###### Step 3:

Server replies with *CreateActivityResponse*:
  
  * `Message.id == 3`
  * `Response.status == STATUS_OK`

Server replies with *Response*:
  
  * `Message.id == 4`
  * `Response.status == ERROR_REJECTED`
  * `Response.details == $Server2Id.ToHex()`


###### Step 4:

Server replies with *CreateActivityResponse*:
  
  * `Message.id == 5`
  * `Response.status == STATUS_OK`

Server replies with *Response*:
  
  * `Message.id == 6`
  * `Response.status == ERROR_REJECTED`
  * `Response.details == $Server3Id.ToHex()`


###### Step 5:

Server replies with *CreateActivityResponse*:
  
  * `Message.id == 7`
  * `Response.status == STATUS_OK`

Server replies with *Response*:
  
  * `Message.id == 8`
  * `Response.status == ERROR_REJECTED`
  * `Response.details == $Server3Id.ToHex()`


###### Step 6:

Server replies with *CreateActivityResponse*:
  
  * `Message.id == 9`
  * `Response.status == STATUS_OK`

Server replies with *Response*:
  
  * `Message.id == 10`
  * `Response.status == ERROR_REJECTED`
  * `Response.details == $Server2Id.ToHex()`








#### PX03011 - Update Activity (including no propagation)

##### Prerequisites/Inputs

###### Prerequisites:
  * Server's database is empty.

###### Inputs:
  * Server's IP address
  * Server's primary port
  * Port for simulated Location Based Network server
  * Base port for simulated proximity server 2 ($BasePort2)
  * Base port for simulated proximity server 3 ($BasePort3)

##### Description 

The test creates several activities on the proximity server.


###### Step 1:

The test obtains a list of service ports from the profile server's primary port.

The test simulates two additional proximity servers - one with location at [10, 20] and network ID `$Server2Id` (Server2), 
running its primary port service on $BasePort2 and neighor port on $BasePort2+1; and one with location at [-10, 5] and network ID `$Server3Id` (Server3), 
running its primary port on $BasePort3 and its neighbor port on $BasePort3+1.

The test simulates a location based network server with location at [0, 0] let's the target proximity server to perform the LOC initialization 
with the simulated location server. 

Then test's location server sends a notification message to the proximity server with the information that the simulated proximity servers
are in its neighborhood.

The simulated proximity servers then wait for *StartNeighborhoodInitializationRequest* messages, to which they reply
with corresponding *StartNeighborhoodInitializationResponse*.

The both proximity servers send *FinishNeighborhoodInitializationRequest* to the target proximity server and wait for *FinishNeighborhoodInitializationResponse* messages.

Server2 then connects to neighbor port of the proximity server and sends *StartNeighborhoodInitializationRequest* and waits for corresponding *StartNeighborhoodInitializationResponse* reply
and then waits for *FinishNeighborhoodInitializationRequest* message to which it replies with *FinishNeighborhoodInitializationResponse*. Then Server2 closes this connection.


###### Step 2:

The test establishes a TLS connection to the client port of the proximity server and sends *StartConversationRequest*:

  * `Message.id := 1`
  * `StartConversationRequest.supportedVersions := [[1,0,0]]`
  * `StartConversationRequest.publicKey` set to the test identity public key
  * `StartConversationRequest.clientChallenge` set to 32 byte random challenge; `$ClientChallenge := StartConversationRequest.clientChallenge`

and reads the response. Then it sends *VerifyIdentityRequest*:

  * `Message.id := 2`
  * `VerifyIdentityRequest.challenge := $Challenge`
  * `ConversationRequest.signature` is set to a signature of `VerifyIdentityRequest` part of the message using the test's identity private key
  
and reads the response. 


###### Step 3:

The test sends *CreateActivityRequest* to create activity with location at [1, 2]:

  * `Message.id := 3`
  * `CreateActivityRequest.activity.version := [1,0,0]`
  * `CreateActivityRequest.activity.id := 1`
  * `CreateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `CreateActivityRequest.activity.profileServerContact.networkId := SHA256("test")`
  * `CreateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.1`
  * `CreateActivityRequest.activity.profileServerContact.primaryPort := 16987`
  * `CreateActivityRequest.activity.type := "Test Type"`
  * `CreateActivityRequest.activity.latitude := 1000000`
  * `CreateActivityRequest.activity.longitude := 2000000`
  * `CreateActivityRequest.activity.precision := 0`
  * `CreateActivityRequest.activity.startTime` is set to current UTC time stamp
  * `CreateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 1 hour
  * `CreateActivityRequest.activity.extraData := "X"`
  * `CreateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `CreateActivityRequest.activity` part of the message using the test's identity private key

and reads the response. 

The test then waits until Server2 receives *NeighborhoodSharedActivityUpdateRequest* with the description of the new activity.
It replies with *NeighborhoodSharedActivityUpdateResponse* to it.


###### Step 4:

The test sends *UpdateActivityRequest* to move activity to [2, 3] and change its other fields:

  * `Message.id := 4`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test2")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.2`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16988`
  * `UpdateActivityRequest.activity.type := "Test Type 2"`
  * `UpdateActivityRequest.activity.latitude := 2000000`
  * `UpdateActivityRequest.activity.longitude := 3000000`
  * `UpdateActivityRequest.activity.precision := 1`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 2 hours
  * `UpdateActivityRequest.activity.extraData := "a=b"`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.

The test then waits until Server2 receives *NeighborhoodSharedActivityUpdateRequest* with the description of the new activity.
It replies with *NeighborhoodSharedActivityUpdateResponse* to it.



###### Step 5:

The test sends *UpdateActivityRequest* to move activity to [3, 4] and change only those fields that won't cause neighborhood propagation:

  * `Message.id := 5`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test2")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.2`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16988`
  * `UpdateActivityRequest.activity.type := "Test Type 2"`
  * `UpdateActivityRequest.activity.latitude := 3000000`
  * `UpdateActivityRequest.activity.longitude := 4000000`
  * `UpdateActivityRequest.activity.precision := 2`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 3 hours
  * `UpdateActivityRequest.activity.extraData := "a=b"`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.

The test then waits 10 seconds and checks that Server2 did not receive any *NeighborhoodSharedActivityUpdateRequest* messages.



###### Step 6:

The test sends *UpdateActivityRequest*:

  * `Message.id := 6`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test2")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.2`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16988`
  * `UpdateActivityRequest.activity.type := "Test Type 3"`
  * `UpdateActivityRequest.activity.latitude := 3000000`
  * `UpdateActivityRequest.activity.longitude := 4000000`
  * `UpdateActivityRequest.activity.precision := 2`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 3 hours
  * `UpdateActivityRequest.activity.extraData := "a=c"`
  * `UpdateActivityRequest.noPropagation := true`
  * `UpdateActivityRequest.ignoreServerIds := []`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.

The test then waits 10 seconds and checks that Server2 did not receive any *NeighborhoodSharedActivityUpdateRequest* messages.




###### Step 7:

The test sends *UpdateActivityRequest* to move activity to [10, 20]:

  * `Message.id := 7`
  * `UpdateActivityRequest.activity.version := [1,0,0]`
  * `UpdateActivityRequest.activity.id := 1`
  * `UpdateActivityRequest.activity.ownerPublicKey` is set to test identity public key
  * `UpdateActivityRequest.activity.profileServerContact.networkId := SHA256("test2")`
  * `UpdateActivityRequest.activity.profileServerContact.ipAddress := 127.0.0.2`
  * `UpdateActivityRequest.activity.profileServerContact.primaryPort := 16988`
  * `UpdateActivityRequest.activity.type := "Test Type 3"`
  * `UpdateActivityRequest.activity.latitude := 10000000`
  * `UpdateActivityRequest.activity.longitude := 20000000`
  * `UpdateActivityRequest.activity.precision := 2`
  * `UpdateActivityRequest.activity.startTime` is set to current UTC time stamp + 1 hour
  * `UpdateActivityRequest.activity.expirationTime` is set to current UTC time stamp + 3 hours
  * `UpdateActivityRequest.activity.extraData := "a=d"`
  * `UpdateActivityRequest.noPropagation := false`
  * `UpdateActivityRequest.ignoreServerIds := [$Server2]`
  * `ConversationRequest.signature` is a valid signature of `UpdateActivityRequest.activity` part of the message using the test's identity private key

and reads the response.

The test then waits until Server2 receives *NeighborhoodSharedActivityUpdateRequest* with the description of the new activity.
It replies with *NeighborhoodSharedActivityUpdateResponse* to it.




##### Acceptance Criteria

###### Step 1:

The test successfully obtains list of ports on which the proximity server provides its services. 
The test successfully starts simulated proximity servers and simulated LOC server. 
The target proximity server successfully connects to the simulated LOC server and initializes the LOC session.

Simulated LOC server successfully sends notification message to the profile server.

The target proximity server sends *StartNeighborhoodInitializationRequest*.

The target proximity server sends the corresponding *FinishNeighborhoodInitializationResponse*.


###### Step 2:

Server replies with *StartConversationResponse*:
  
  * `Message.id == 1`
  * `Response.status == STATUS_OK`
  * `ConversationResponse.signature` is a valid signature of $ClientChallenge
  * `StartConversationResponse.version == [1,0,0]`
  * `StartConversationResponse.publicKey.Length == 32`
  * `StartConversationResponse.challenge.Length == 32`
  * `StartConversationResponse.clientChallenge == $ClientChallenge`

Server replies with *VerifyIdentityResponse*:

  * `Message.id == 2`
  * `Response.status == STATUS_OK`


###### Step 3:

Server replies with *CreateActivityResponse*:
  
  * `Message.id == 3`
  * `Response.status == STATUS_OK`


Server sends *NeighborhoodSharedActivityUpdateRequest* to Server2 with description of the activity.


###### Step 4:

Server replies with *UpdateActivityResponse*:
  
  * `Message.id == 4`
  * `Response.status == STATUS_OK`

Server sends *NeighborhoodSharedActivityUpdateRequest* to Server2 with description of the activity.


###### Step 5:

Server replies with *UpdateActivityResponse*:
  
  * `Message.id == 5`
  * `Response.status == STATUS_OK`

Server2 did not receive any *NeighborhoodSharedActivityUpdateRequest* messages.


###### Step 6:

Server replies with *UpdateActivityResponse*:
  
  * `Message.id == 6`
  * `Response.status == STATUS_OK`

Server2 did not receive any *NeighborhoodSharedActivityUpdateRequest* messages.


###### Step 7:

Server replies with *UpdateActivityResponse*:
  
  * `Message.id == 7`
  * `Response.status == STATUS_OK`

Server sends *NeighborhoodSharedActivityUpdateRequest* to Server2 with description of the activity.












