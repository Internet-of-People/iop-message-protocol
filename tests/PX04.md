### PX04xxx - Activity Search Related Functionality Tests

#### PX04001 - Activity Search - Simple Search

##### Prerequisites/Inputs

###### Prerequisites:
  * Server's database is empty.

###### Inputs:
  * Server's IP address ($ServerIP)
  * Server's primary port
  * Port for simulated Location Based Network server


##### Description 

The test fills in the proximity server's database with a newly created activities and then performs several different search queries.


###### Step 1:

The test simulates a location based network server.
The test creates two identities with public keys `$Identity1PubKey` and `$Identity2PubKey`. 
The test obtains a list of service ports from the proximity server's primary port.

The test creates following new activities:

  * $activityInfo1 is `version := [1,0,0], id := 1, ownerPublicKey := $Identity1PubKey, profileServerContact := { networkId := SHA256("test"),  ipAddress := 127.0.0.1, primaryPort := 16987 },  type := "Activity Type A", lat/lon := (31.23, 121.47),  precision := 100,  startTime := current UTC timestamp - 1 hour,  expirationTime := current UTC timestamp + 1 hour,   extraData = ""`
  * $activityInfo2 is `version := [1,0,0], id := 2, ownerPublicKey := $Identity1PubKey, profileServerContact := { networkId := SHA256("test"),  ipAddress := 127.0.0.1, primaryPort := 16987 },  type := "Activity Type A", lat/lon := (18.96, 72.82),   precision := 0,    startTime := current UTC timestamp - 2 hours, expirationTime := current UTC timestamp + 4 hours,  extraData = "t=running,Cycling,ice hockey,water polo"`
  * $activityInfo3 is `version := [1,0,0], id := 3, ownerPublicKey := $Identity1PubKey, profileServerContact := { networkId := SHA256("test"),  ipAddress := 127.0.0.1, primaryPort := 16987 },  type := "Act. Type A",     lat/lon := (24.86, 67.01),   precision := 1000, startTime := current UTC timestamp - 3 hours, expirationTime := current UTC timestamp + 22 hours, extraData = "l=Karachi,PK;a=iop://185f8db32271fe25f561a6fc938b2e264306ec304eda518007d1764826381969;t=traveling,cycling,running"`
  * $activityInfo4 is `version := [1,0,0], id := 4, ownerPublicKey := $Identity1PubKey, profileServerContact := { networkId := SHA256("test"),  ipAddress := 127.0.0.1, primaryPort := 16987 },  type := "Act. Type B",     lat/lon := (-34.61, -58.37), precision := 123,  startTime := current UTC timestamp - 1 hour,  expirationTime := current UTC timestamp + 20 hours, extraData = ""`
  * $activityInfo5 is `version := [1,0,0], id := 1, ownerPublicKey := $Identity2PubKey, profileServerContact := { networkId := SHA256("test2"), ipAddress := 127.0.0.2, primaryPort := 16987 },  type := "Activity Type B", lat/lon := (31.231, 121.47), precision := 500,  startTime := current UTC timestamp + 1 hour,  expirationTime := current UTC timestamp + 3 hours,  extraData = "running"`
  * $activityInfo6 is `version := [1,0,0], id := 5, ownerPublicKey := $Identity1PubKey, profileServerContact := { networkId := SHA256("test"),  ipAddress := 127.0.0.1, primaryPort := 16987 },  type := "Activity Type C", lat/lon := (18.961, 72.82),  precision := 500,  startTime := current UTC timestamp + 2 hours, expirationTime := current UTC timestamp + 3 hours,  extraData = "MTg1ZjhkYjMyMjcxZmUyNWY1NjFhNmZjOTM4YjJlMjY0MzA2ZWMzMDRlZGE1MTgwMDdkMTc2NDgyNjM4MTk2OQ"`
  * $activityInfo7 is `version := [1,0,0], id := 2, ownerPublicKey := $Identity2PubKey, profileServerContact := { networkId := SHA256("test2"), ipAddress := 127.0.0.2, primaryPort := 16987 },  type := "Activity Type C", lat/lon := (18.961, 72.82),  precision := 500,  startTime := current UTC timestamp + 3 hours, expirationTime := current UTC timestamp + 4 hours,  extraData = "t=running;l=Mumbai,IN"`


###### Step 2:

Using the first identity, the test establishes a new TLS connection to the proximity server's client port 
and sends *ActivitySearchRequest* to find all test activities:

  * `Message.id := 1`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.


###### Step 3:

Then it sends *ActivitySearchRequest* to find activities 4 and 5 by their type:

  * `Message.id := 2`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := "*Type B"`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.


###### Step 4:

Then it sends *ActivitySearchRequest* to find activities 6 and 7 by their type:

  * `Message.id := 3`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := "Activity Type C"`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.

  
###### Step 5:

Then it sends *ActivitySearchRequest* to find activities 1, 2, 5, 6, and 7 by their type:

  * `Message.id := 4`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := "*vity*"`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.

  
###### Step 6:

Then it sends *ActivitySearchRequest* to find no activities because of the type filter:

  * `Message.id := 5`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := "were*"`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.

  
###### Step 7:

Then it sends *ActivitySearchRequest* to find activities 5 and 7 by their owner:

  * `Message.id := 6`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := SHA256($Identity2PubKey)`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.

  
###### Step 8:

Then it sends *ActivitySearchRequest* to find no activities because of the owner filter:

  * `Message.id := 7`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := SHA256("test")`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.

  
###### Step 9:

Then it sends *ActivitySearchRequest* to find activity 6 by its type and owner:

  * `Message.id := 8`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := SHA256($Identity1PubKey)`
  * `ActivitySearchRequest.type := "*Type C"`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.

  
###### Step 10:

Then it sends *ActivitySearchRequest* to find activities 6 and 7 by their location:

  * `Message.id := 9`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := 18961000`
  * `ActivitySearchRequest.longitude := 72820000`
  * `ActivitySearchRequest.radius := 10`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.

  
###### Step 11:

Then it sends *ActivitySearchRequest* to find activities 2, 6 and 7 by their location:

  * `Message.id := 10`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := 18961000`
  * `ActivitySearchRequest.longitude := 72820000`
  * `ActivitySearchRequest.radius := 5000`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.


###### Step 12:

Then it sends *ActivitySearchRequest* to find no activities because of the location filter:

  * `Message.id := 11`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := -12345678`
  * `ActivitySearchRequest.longitude := 12345678`
  * `ActivitySearchRequest.radius := 5000`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.


###### Step 13:

Then it sends *ActivitySearchRequest* to find no activities because of the extra data filter:

  * `Message.id := 12`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := "no activities"`

and reads the response.


###### Step 14:

Then it sends *ActivitySearchRequest* to find activities 2, 3 and 7 by their extraData information:

  * `Message.id := 13`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := "(^|;)t=(|[^=]+,)running([;,]|$)"`

and reads the response.


###### Step 15:

Then it sends *ActivitySearchRequest* to find activities 2, 3, 5, 6, 7, but only return first 2 records:

  * `Message.id := 14`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 2`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ".+"`

and reads the response. Then it sends *ActivitySearchPartRequest* to get the next 2 records:

  * `Message.id := 15`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchPartRequest.recordIndex := 2`
  * `ActivitySearchPartRequest.recordCount := 2`

and reads the response. Then it sends *ActivitySearchPartRequest* to get the remaining record:

  * `Message.id := 16`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchPartRequest.recordIndex := 4`
  * `ActivitySearchPartRequest.recordCount := 1`

and reads the response. Then it sends *ActivitySearchPartRequest* to get all records again:

  * `Message.id := 17`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchPartRequest.recordIndex := 0`
  * `ActivitySearchPartRequest.recordCount := 5`

and reads the response.


###### Step 16:

Then it sends *ActivitySearchRequest* to find activities 2, 3 and 7 by their extraData information, but only search for and get 2 records:

  * `Message.id := 18`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 2`
  * `ActivitySearchRequest.maxTotalRecordCount := 2`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := "(^|;)t=(|[^=]+,)running([;,]|$)"`

and reads the response.



###### Step 17:

Then it sends *ActivitySearchRequest* to find all activities by their type:

  * `Message.id := 19`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := "act*"`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.


  
###### Step 18:

Then it sends *ActivitySearchRequest* to find all activities by their type:

  * `Message.id := 20`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := "*ct*"`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.


  
###### Step 19:

Then it sends *ActivitySearchRequest* to find all activities by their type:

  * `Message.id := 21`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := "**"`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.


  
###### Step 20:

Then it sends *ActivitySearchRequest* to find all activities by their type:

  * `Message.id := 22`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := "*"`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.



###### Step 21:

Then it sends *ActivitySearchRequest* to find activities 2 and 3 using multiple criteria:

  * `Message.id := 23`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := "*Type A"`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := "(^|;)t=(|[^=]+,)running([;,]|$)"`

and reads the response.


###### Step 22:

Then it sends *ActivitySearchRequest* to find activities 2, 3, 5, 6, 7, but only return first 2 records:

  * `Message.id := 24`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 2`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ".+"`

and reads the response. After 15 seconds wait, it sends *ActivitySearchPartRequest*:

  * `Message.id := 25`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchPartRequest.recordIndex := 8`
  * `ActivitySearchPartRequest.recordCount := 2`

and reads the response. After 15 seconds wait, it sends *ActivitySearchPartRequest*:

  * `Message.id := 26`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchPartRequest.recordIndex := 4`
  * `ActivitySearchPartRequest.recordCount := 5`

and reads the response. After 22 seconds wait, it sends *ActivitySearchPartRequest*:

  * `Message.id := 27`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchPartRequest.recordIndex := 0`
  * `ActivitySearchPartRequest.recordCount := 500`

and reads the response. Then it sends *ActivitySearchPartRequest* to get all records:

  * `Message.id := 28`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchPartRequest.recordIndex := 0`
  * `ActivitySearchPartRequest.recordCount := 5`

and reads the response.


###### Step 23:

Then it sends *ActivitySearchRequest* to find activity 5 by its location:

  * `Message.id := 29`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := 31300000`
  * `ActivitySearchRequest.longitude := 121470000`
  * `ActivitySearchRequest.radius := 7500`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.


###### Step 24:

Then it sends *ActivitySearchRequest* to find activities 1, 2, 3 and 4 by their startTime:

  * `Message.id := 30`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter` set to current UTC timestamp
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.


###### Step 25:

Then it sends *ActivitySearchRequest* to find activities 3 and 4 by their expirationTime:

  * `Message.id := 31`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore` set to current UTC timestamp + 10 hours
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.


###### Step 26:

Then it sends *ActivitySearchRequest* to find activities 2 and 3 by their startTime and expirationTime:

  * `Message.id := 32`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter` set to current UTC timestamp - 90 minutes
  * `ActivitySearchRequest.expirationNotBefore` set to current UTC timestamp + 150 minutes
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.


  
##### Acceptance Criteria


###### Step 1:

The test successfully obtains list of ports on which the proximity server provides its services. 
The test successfully creates the test activities. 


###### Step 2:

Server sends *ActivitySearchResponse*:

  * `Message.id == 1`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 7`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 7`
  * `ActivitySearchResponse.activities == 
    (
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo1},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo2},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo3},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo4},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo5},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo6},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo7},
    )`



###### Step 3:

Server sends *ActivitySearchResponse*:

  * `Message.id == 2`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 2`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 2`
  * `ActivitySearchResponse.activities == 
    (
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo4},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo5},
    )`




###### Step 4:

Server sends *ActivitySearchResponse*:

  * `Message.id == 3`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 2`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 2`
  * `ActivitySearchResponse.activities == 
    (
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo6},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo7},
    )`

  
###### Step 5:

Server sends *ActivitySearchResponse*:

  * `Message.id == 4`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 5`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 5`
  * `ActivitySearchResponse.activities == 
    (
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo1},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo2},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo5},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo6},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo7},
    )`

  
###### Step 6:

Server sends *ActivitySearchResponse*:

  * `Message.id == 5`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 0`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 0`
  * `ActivitySearchResponse.activities == []`

  
###### Step 7:

Server sends *ActivitySearchResponse*:

  * `Message.id == 6`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 2`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 2`
  * `ActivitySearchResponse.activities == 
    (
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo5},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo7},
    )`

  
###### Step 8:

Server sends *ActivitySearchResponse*:

  * `Message.id == 7`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 0`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 0`
  * `ActivitySearchResponse.activities == []`


###### Step 9:

Server sends *ActivitySearchResponse*:

  * `Message.id == 8`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 1`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 1`
  * `ActivitySearchResponse.activities == 
    (
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo6},
    )`


###### Step 10:

Server sends *ActivitySearchResponse*:

  * `Message.id == 9`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 2`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 2`
  * `ActivitySearchResponse.activities == 
    (
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo6},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo7},
    )`


###### Step 11:

Server sends *ActivitySearchResponse*:

  * `Message.id == 10`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 3`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 3`
  * `ActivitySearchResponse.activities == 
    (
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo2},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo6},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo7},
    )`


###### Step 12:

Server sends *ActivitySearchResponse*:

  * `Message.id == 11`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 0`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 0`
  * `ActivitySearchResponse.activities == []


###### Step 13:

Server sends *ActivitySearchResponse*:

  * `Message.id == 12`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 0`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 0`
  * `ActivitySearchResponse.activities == []



###### Step 14:

Server sends *ActivitySearchResponse*:

  * `Message.id == 13`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 3`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 3`
  * `ActivitySearchResponse.activities == 
    (
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo2},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo3},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo7},
    )`


###### Step 15:

Server sends *ActivitySearchResponse*:

  * `Message.id == 14`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 5`
  * `ActivitySearchResponse.maxResponseRecordCount == 2`
  * `ActivitySearchResponse.activities.Count == 2`
  * `$SetA := ActivitySearchResponse.activities`


Server sends *ActivitySearchPartResponse*:

  * `Message.id == 15`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchPartResponse.recordIndex == 2`
  * `ActivitySearchPartResponse.recordCount == 2`
  * `ActivitySearchPartResponse.activities.Count == 2`
  * `$SetB := ActivitySearchPartResponse.activities`


Server sends *ActivitySearchPartResponse*:

  * `Message.id == 16`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchPartResponse.recordIndex == 4`
  * `ActivitySearchPartResponse.recordCount == 1`
  * `ActivitySearchPartResponse.activities.Count == 1`
  * `$SetC := ActivitySearchPartResponse.activities`


Server sends *ActivitySearchPartResponse*:

  * `Message.id == 17`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchPartResponse.recordIndex == 0`
  * `ActivitySearchPartResponse.recordCount == 5`
  * `ActivitySearchPartResponse.activities.Count == 5`
  * `$SetAll := ActivitySearchPartResponse.activites ==
    (
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo2},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo3},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo5},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo6},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo7},
    )`

  * `$SetA + $SetB + $SetC == $SetAll`



###### Step 16:

Server sends *ActivitySearchResponse*:

  * `Message.id == 18`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 2`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 2`
  * `ActivitySearchResponse.activities == any two of 
    (
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo2},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo3},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo7},
    )`



###### Step 17:

Server sends *ActivitySearchResponse*:

  * `Message.id == 19`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 7`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 7`
  * `ActivitySearchResponse.activities == 
    (
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo1},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo2},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo3},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo4},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo5},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo6},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo7},
    )`


###### Step 18:

Server sends *ActivitySearchResponse*:

  * `Message.id == 20`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 7`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 7`
  * `ActivitySearchResponse.activities == 
    (
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo1},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo2},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo3},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo4},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo5},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo6},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo7},
    )`


###### Step 19:

Server sends *ActivitySearchResponse*:

  * `Message.id == 21`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 7`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 7`
  * `ActivitySearchResponse.activities == 
    (
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo1},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo2},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo3},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo4},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo5},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo6},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo7},
    )`


###### Step 20:

Server sends *ActivitySearchResponse*:

  * `Message.id == 22`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 7`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 7`
  * `ActivitySearchResponse.activities == 
    (
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo1},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo2},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo3},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo4},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo5},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo6},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo7},
    )`


###### Step 21:

Server sends *ActivitySearchResponse*:

  * `Message.id == 23`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 2`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 2`
  * `ActivitySearchResponse.activities == 
    (
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo2},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo3},
    )`


###### Step 22:

Server sends *ActivitySearchResponse*:

  * `Message.id == 24`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 5`
  * `ActivitySearchResponse.maxResponseRecordCount == 2`
  * `ActivitySearchResponse.activities.Count == 2`


Server sends *Response*:

  * `Message.id == 26`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "recordIndex"`


Server sends *Response*:

  * `Message.id == 27`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "recordCount"`


Server sends *Response*:

  * `Message.id == 28`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "recordCount"`


Server sends *ActivitySearchPartResponse*:

  * `Message.id == 29`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchPartResponse.recordIndex == 0`
  * `ActivitySearchPartResponse.recordCount == 5`
  * `ActivitySearchPartResponse.activities.Count == 5`
  * `ActivitySearchPartResponse.activities ==
    (
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo2},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo3},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo5},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo6},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo7},
    )`


###### Step 23:

Server sends *ActivitySearchResponse*:

  * `Message.id == 25`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 1`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 1`
  * `ActivitySearchResponse.activities == 
    (
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo5},
    )`


###### Step 24:

Server sends *ActivitySearchResponse*:

  * `Message.id == 26`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 4`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 4`
  * `ActivitySearchResponse.activities == 
    (
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo1},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo2},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo3},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo4},
    )`


###### Step 25:

Server sends *ActivitySearchResponse*:

  * `Message.id == 27`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 2`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 2`
  * `ActivitySearchResponse.activities == 
    (
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo3},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo4},
    )`


###### Step 26:

Server sends *ActivitySearchResponse*:

  * `Message.id == 28`
  * `Response.status == STATUS_OK`
  * `SingleResponse.version := [1,0,0]`
  * `ActivitySearchResponse.totalRecordCount == 2`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 2`
  * `ActivitySearchResponse.activities == 
    (
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo2},
      {isPrimary == true; signedActivity.signature is a valid signature of signedActivity.activity, which matches $activityInfo3},
    )`









#### PX04002 - Activity Search - Empty Database

##### Prerequisites/Inputs

###### Prerequisites:
  * Server's database is empty.

###### Inputs:
  * Server's IP address ($ServerIP)
  * Server's primary port
  * Port for simulated Location Based Network server


##### Description 

The test performs a search query when the proximity server has empty database.


###### Step 1:

The test simulates a location based network server.
The test obtains a list of service ports from the proximity server's primary port.
Test creates a new TLS connection to the proximity server's client port and sends *ActivitySearchRequest*:

  * `Message.id := 1`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 100`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.


  
##### Acceptance Criteria


###### Step 1:

The test successfully obtains list of ports on which the proximity server provides its services. 

Server replies with *ActivitySearchResponse*:

  * `Message.id == 1`
  * `Response.status == STATUS_OK`
  * `ActivitySearchResponse.totalRecordCount == 0`
  * `ActivitySearchResponse.maxResponseRecordCount == 100`
  * `ActivitySearchResponse.activities.Count == 0`








#### PX04003 - Activity Search - Mass Location Search

##### Prerequisites/Inputs

###### Prerequisites:
  * Server's database is empty.

###### Inputs:
  * Server's IP address ($ServerIP)
  * Server's primary port
  * Port for simulated Location Based Network server


##### Description 

The test creates a large number of activities. Then it performs a number of search queries with a focus on GPS location of the created identities and verifies the results. 


###### Step 1:

The test simulates a location based network server.
The test obtains a list of service ports from the proximity server's primary port.

The test generates positive integers R1, R2, and R3:

  * `20,000 < R2 < 150,000`
  * `5,000 < R1 < 0.8 * R2`
  * `1.50 * R2 < R3 < 500,000`

The test generates 20 GPS locations, first 15 locations are generated as follows:

  * Location 1 is within R2 range of (0.0, 0.0),
  * location 2 is within R2 range of (89.9, 0.0),
  * location 3 is within R2 range of (-89.9, 0.0),
  * location 4 is within R2 range of (40.0, 0.0),
  * location 5 is within R2 range of (0.0, 179.9),
  * location 6 is within R2 range of (89.9, 179.9),
  * location 7 is within R2 range of (-89.9, 179.9),
  * location 8 is within R2 range of (40.0, 179.9),
  * location 9 is within R2 range of (0.0, -179.9),
  * location 10 is within R2 range of (89.9, -179.9),
  * location 11 is within R2 range of (-89.9, -179.9),
  * location 12 is within R2 range of (40.0, -179.9),
  * location 13 is within R2 range of (0.0, 50.0),
  * location 14 is within R2 range of (89.9, 50.0),
  * location 15 is within R2 range of (-89.9, 50.0).

the remaining 5 locations are random GPS locations.

For each of 20 locations, the test creates 10 activities that are all located randomly within R1 range of the location, 
10 activities within R2 range and 10 activities within R3 range. Precision is selected randomly.


###### Step 2:

The test performs search queries using *ActivitySearchRequest*. For each of the 20 locations, it searches for activities
located within R1, R2 and R3 and a random number (new for each query) within the range of 1,000,000 to 10,000,000.
The tests verifies that the search results match the expected results.




  
##### Acceptance Criteria


###### Step 1:

The test successfully obtains list of ports on which the proximity server provides its services. 
Then the test successfully creates the test activities.


###### Step 2:

The proximity server's results for each search query match locally computed expected results. 











#### PX04004 - Activity Search - Invalid Queries

###### Prerequisites:
  * Server's database is empty.

###### Inputs:
  * Server's IP address ($ServerIP)
  * Server's primary port
  * Port for simulated Location Based Network server

##### Description 

The test performs a set of activity search queries with invalid values.

###### Step 1:

The test simulates a location based network server.
The test obtains a list of service ports from the proximity server's primary port.

The test establishes a new TLS connection to the proximity server's client port.

Then it sends *ActivitySearchRequest*:

  * `Message.id := 1`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 0`
  * `ActivitySearchRequest.maxTotalRecordCount := 1000`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.

Then it sends *ActivitySearchRequest*:

  * `Message.id := 2`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 1010`
  * `ActivitySearchRequest.maxTotalRecordCount := 2000`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.

Then it sends *ActivitySearchRequest*:

  * `Message.id := 3`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 50`
  * `ActivitySearchRequest.maxTotalRecordCount := 25`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.

Then it sends *ActivitySearchRequest*:

  * `Message.id := 4`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 50`
  * `ActivitySearchRequest.maxTotalRecordCount := 10001`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.

Then it sends *ActivitySearchRequest*:

  * `Message.id := 5`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 1000`
  * `ActivitySearchRequest.ownerNetworkId := [1,2,3]`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.

Then it sends *ActivitySearchRequest*:

  * `Message.id := 6`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 1000`
  * `ActivitySearchRequest.ownerNetworkId` set to array of 40 bytes 0x12
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.

Then it sends *ActivitySearchRequest*:

  * `Message.id := 7`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 1000`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type` is set to string containing 70x 'a'
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.

Then it sends *ActivitySearchRequest*:

  * `Message.id := 8`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 1000`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type` is set to string containing 50x 'ɐ' (UTF8 code 0xc990), which consumes 2 bytes per character
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.


Then it sends *ActivitySearchRequest*:

  * `Message.id := 9`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 1000`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 987654321987654321`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.


Then it sends *ActivitySearchRequest*:

  * `Message.id := 10`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 1000`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 987654321987654321`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.


Then it sends *ActivitySearchRequest*:

  * `Message.id := 11`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 1000`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter` is set to current UTC time stamp
  * `ActivitySearchRequest.expirationNotBefore` is set to current UTC time stamp - 1 hour
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.


Then it sends *ActivitySearchRequest*:

  * `Message.id := 12`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 1000`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := -90,000,001`
  * `ActivitySearchRequest.longitude := 1`
  * `ActivitySearchRequest.radius := 1`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.

Then it sends *ActivitySearchRequest*:

  * `Message.id := 13`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 1000`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := 90,000,001`
  * `ActivitySearchRequest.longitude := 1`
  * `ActivitySearchRequest.radius := 1`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.

Then it sends *ActivitySearchRequest*:

  * `Message.id := 14`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 1000`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := 1`
  * `ActivitySearchRequest.longitude := -180,000,000`
  * `ActivitySearchRequest.radius := 1`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.

Then it sends *ActivitySearchRequest*:

  * `Message.id := 15`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 1000`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := 1`
  * `ActivitySearchRequest.longitude := 180,000,001`
  * `ActivitySearchRequest.radius := 1`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.

Then it sends *ActivitySearchRequest*:

  * `Message.id := 16`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 1000`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := 1`
  * `ActivitySearchRequest.longitude := 1`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := ""`

and reads the response.

Then it sends *ActivitySearchRequest*:

  * `Message.id := 17`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 1000`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData` is set to string containing 300x 'a'

and reads the response.

Then it sends *ActivitySearchRequest*:

  * `Message.id := 18`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 1000`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData` is set to string containing 150x 'ɐ' (UTF8 code 0xc990), which consumes 2 bytes per character

and reads the response.

Then it sends *ActivitySearchRequest*:

  * `Message.id := 19`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 1000`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := "(^|;)key=([^=]+;)?va(?'alpha')lue($|,|;)"`

and reads the response.

Then it sends *ActivitySearchRequest*:

  * `Message.id := 20`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 1000`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := "iuawhefiuhawef\aaerwergj"`

and reads the response.

Then it sends *ActivitySearchRequest*:

  * `Message.id := 21`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 1000`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := "aerghearg\beraarg"`

and reads the response.

Then it sends *ActivitySearchRequest*:

  * `Message.id := 22`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 1000`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := "afewafawefwaef\"`

and reads the response.

Then it sends *ActivitySearchRequest*:

  * `Message.id := 23`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 1000`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := "(^|;)key=([^=]+;)?(?<double>A)B<double>($|,|;)"`

and reads the response.

Then it sends *ActivitySearchRequest*:

  * `Message.id := 24`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchRequest.includePrimaryOnly := false`
  * `ActivitySearchRequest.maxResponseRecordCount := 100`
  * `ActivitySearchRequest.maxTotalRecordCount := 1000`
  * `ActivitySearchRequest.ownerNetworkId := []`
  * `ActivitySearchRequest.type := ""`
  * `ActivitySearchRequest.startNotAfter := 0`
  * `ActivitySearchRequest.expirationNotBefore := 0`
  * `ActivitySearchRequest.latitude := NO_LOCATION`
  * `ActivitySearchRequest.longitude := NO_LOCATION`
  * `ActivitySearchRequest.radius := 0`
  * `ActivitySearchRequest.extraData := "(^|;)key=rai??n($|,|;)"`

and reads the response.


###### Step 2:

Then it sends *ProfileSearchPartRequest*:

  * `Message.id := 25`
  * `SingleRequest.version := [1,0,0]`
  * `ActivitySearchPartRequest.recordIndex := 10`
  * `ActivitySearchPartRequest.recordCount := 20`



##### Acceptance Criteria

###### Step 1:

The test successfully obtains list of ports on which the profile server provides its services.

Server replies with *Response*:

  * `Message.id == 1`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "maxResponseRecordCount"`

Server replies with *Response*:

  * `Message.id == 2`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "maxResponseRecordCount"`

Server replies with *Response*:

  * `Message.id == 3`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "maxTotalRecordCount"`

Server replies with *Response*:

  * `Message.id == 4`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "maxTotalRecordCount"`

Server replies with *Response*:

  * `Message.id == 5`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "ownerNetworkId"`

Server replies with *Response*:

  * `Message.id == 6`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "ownerNetworkId"`

Server replies with *Response*:

  * `Message.id == 7`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "type"`

Server replies with *Response*:

  * `Message.id == 8`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "type"`

Server replies with *Response*:

  * `Message.id == 9`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "startNotAfter"`

Server replies with *Response*:

  * `Message.id == 10`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "expirationNotBefore"`

Server replies with *Response*:

  * `Message.id == 11`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "expirationNotBefore"`

Server replies with *Response*:

  * `Message.id == 12`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "latitude"`

Server replies with *Response*:

  * `Message.id == 13`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "latitude"`

Server replies with *Response*:

  * `Message.id == 14`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "longitude"`

Server replies with *Response*:

  * `Message.id == 15`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "longitude"`

Server replies with *Response*:

  * `Message.id == 16`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "radius"`

Server replies with *Response*:

  * `Message.id == 17`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "extraData"`

Server replies with *Response*:

  * `Message.id == 18`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "extraData"`

Server replies with *Response*:

  * `Message.id == 19`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "extraData"`

Server replies with *Response*:

  * `Message.id == 20`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "extraData"`

Server replies with *Response*:

  * `Message.id == 21`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "extraData"`

Server replies with *Response*:

  * `Message.id == 22`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "extraData"`

Server replies with *Response*:

  * `Message.id == 23`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "extraData"`


Server replies with *Response*:

  * `Message.id == 24`
  * `Response.status == ERROR_INVALID_VALUE`
  * `Response.details == "extraData"`


###### Step 2:

Then it sends *Response*:

  * `Message.id := 25`
  * `Response.status == ERROR_NOT_AVAILABLE`






